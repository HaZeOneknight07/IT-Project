<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report - Gelder Group Surveyors</title>
    <style>
        body{font-family:Arial,sans-serif;margin:0;padding:0;background-color:#f4f4f4}
        header{background-color:#333;color:#fff;text-align:center;padding:1em;display:flex;align-items:center;justify-content:space-between;padding-right:49em}
        header img{width:100px;margin-right:auto}
        header h1{margin:0}
        nav{background-color:#444;color:#fff;text-align:center;padding:.5em 0;display:flex;justify-content:center;align-items:center;font-size:16px}
        nav img{width:50px;margin-right:10px}
        nav a{color:#fff;text-decoration:none;padding:1em;margin:0 1.5em;transition:background-color .5s;border-radius:20px}
        nav a:hover{background-color:#333}
        main{padding:2em;text-align:center}
        form{max-width:300px;margin:0 auto}
        label{display:block;margin-bottom:10px}
        textarea{width:100%;padding:8px;margin-bottom:10px;box-sizing:border-box}
        button{background-color:#333;color:#fff;padding:10px;border:none;cursor:pointer}
        .info-box{margin:10px 0}
        footer{background-color:#333;color:#fff;text-align:center;padding:1em 0;position:fixed;bottom:0;width:100%}
    </style>
</head>
<body>
    <header>
        <a href="https://gnet.geldergroup.co.uk/" target="_blank">
            <img src="img/logo.png" alt="GelderGroupLogo">
        </a>
        <h1>Gelder Group Surveyors</h1>
    </header>

    <nav>
        <a href="home.html">Home</a>
        <a href="site information.html">Site Information</a>
        <a href="reference.html">Reference </a>
    </nav>

    <main>
        <h2>Report Page</h2>
        <div class="info-box" id="selectedOption"></div>
        <div class="info-box" id="jobNumberBox"></div>
        <div class="info-box" id="clientRefNumberBox"></div>
        <div class="info-box" id="dateBox"></div>
        <div class="info-box" id="addressBox"></div>
        <div class="info-box" id="phoneNumberBox"></div>
        <form id="report-form">
            <label for="report-input1">Enter your report:</label>
            <textarea id="report-input1" name="report-input1" rows="4" cols="50"></textarea>
            <button type="button" onclick="submitReport()">Next</button>
        </form>
    </main>

    <footer>
        &copy; 2024 Gelder Group. All rights reserved.
    </footer>

    <script defer>
        document.addEventListener("DOMContentLoaded", function () {
            var localStorageItem = function (key) {
                return localStorage.getItem(key) || "";
            };
    
            var selectedOption = localStorageItem("selectedOption");
            console.log("Selected Option:", selectedOption);
    
            var jobNumber = localStorageItem("jobNumber");
            var clientRefNumber = localStorageItem("clientRefNumber");
            var date = localStorageItem("date");
            var address = localStorageItem("address");
            var phoneNumber = localStorageItem("phoneNumber");
    
            var optionDisplayNames = { "Xactimate": "Xactimate", "Sedgwick": "Sedgwick" };
    
            document.getElementById("selectedOption").innerHTML = "<strong>Selected Option:</strong> " + (optionDisplayNames[selectedOption] || "");
            document.getElementById("jobNumberBox").innerHTML = "<strong>Job Number:</strong> " + jobNumber;
            if (selectedOption === "Xactimate") {
                document.getElementById("clientRefNumberBox").innerHTML = "<strong>Client Reference Number:</strong> " + clientRefNumber;
            }
            // Format the date as "dd/mm/yy"
            document.getElementById("dateBox").innerHTML = "<strong>Date:</strong> " + formatDate(date);
            document.getElementById("addressBox").innerHTML = "<strong>Address:</strong> " + address;
            document.getElementById("phoneNumberBox").innerHTML = "<strong>Phone Number:</strong> " + phoneNumber;
    
            // Leave the report box empty
            document.getElementById("report-input1").value = "";
        });
    
        function submitReport() {
            var reportText = document.getElementById("report-input1").value;
            localStorage.setItem("ReportText", reportText);
            window.location.href = "hub.html";
        }
    
        // Function to format date as "dd/mm/yy"
        function formatDate(inputDate) {
            var dateObj = new Date(inputDate);
            var day = dateObj.getDate();
            var month = dateObj.getMonth() + 1; // Months are zero-based
            var year = dateObj.getFullYear() % 100; // Get last two digits of the year
    
            return `${day}/${month}/${year}`;
        }
    </script>    
</body>
</html>
